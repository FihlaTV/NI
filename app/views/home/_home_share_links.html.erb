<span class="clear-hack"></span>
<span class="share-links">
  <% if can? :create, Favourite %>
    <!-- Favourite -->
    <% if current_article_favourited? %>
      <%= link_to raw('<i class="fa fa-heart"></i>'), issue_article_favourite_path(article.issue.id, article.id, favourite_id_for_article(article)), :method => 'delete', :alt => 'Remove from favourites', :title => 'Remove from favourites' %>
    <% else %>
      <%= link_to raw('<i class="fa fa-heart-o"></i>'), issue_article_favourites_path(article.issue, article), :method => 'create', :alt => 'Add to favourites', :title => 'Add to favourites' %>
    <% end %>
    <!-- END Favourite -->
  <% end %>
  <% if can? :create, GuestPass %>
    <!-- Sharing options -->
    <% if current_article_has_a_guest_pass? %>
      <%= link_to raw('<i class="fa fa-share"></i>'), issue_article_guest_pass_path(article.issue.id, article.id, guest_pass_id_for_article(article)), :method => 'delete', :alt => 'Delete this guest pass', :title => 'Delete this guest pass' %>
      <!-- Guest pass link -->
      <%= link_to 'Guest pass to share', generate_guest_pass_link_string(current_user.guest_passes.select{|s| (s.article.id == article.id)}.last), :alt => 'Right-click and copy this link to share it with friends.', :title => 'Right-click and copy this link to share it with friends.' %>
      <!-- Email button -->
	    <%= link_to raw('<i class="fa fa-envelope"></i>'), issue_article_email_article_path(article.issue,article), :alt => 'Email this article to a friend', :title => 'Email this article to a friend' %>
    <% else %>
      <%= link_to raw('<i class="fa fa-share"></i>'), issue_article_guest_passes_path(article.issue, article), :method => 'create', :alt => 'Share this article with a friend.', :title => 'Share this article with a friend.' %>
    <% end %>
    <!-- Tweet button -->
    <%= link_to raw('<i class="fa fa-twitter"></i>'), issue_article_tweet_path(article.issue,article, :text => strip_tags(article.title)), :alt => 'Tweet about this article', :title => 'Tweet about this article', :target => "_blank" %>
    <!-- Facebook button -->
    <%= link_to raw('<i class="fa fa-facebook"></i>'), issue_article_wall_post_path(article.issue,article, :text => strip_tags(article.title)), :alt => 'Share this article on Facebook', :title => 'Share this article on Facebook', :target => "_blank" %>
    <!-- END Social buttons -->
    <!-- END Sharing options -->
  <% else %>
    <!-- Email button -->
    <%= link_to raw('<i class="fa fa-envelope"></i>'), issue_article_email_article_path(article.issue,article), :alt => 'Email this article to a friend', :title => 'Email this article to a friend' %>
    <!-- Tweet button -->
    <%= link_to raw('<i class="fa fa-twitter"></i>'), issue_article_tweet_path(article.issue,article, :text => strip_tags(article.title)), :alt => 'Tweet about this article', :title => 'Tweet about this article', :target => "_blank" %>
    <!-- Facebook button -->
    <%= link_to raw('<i class="fa fa-facebook"></i>'), issue_article_wall_post_path(article.issue,article, :text => strip_tags(article.title)), :alt => 'Share this article on Facebook', :title => 'Share this article on Facebook', :target => "_blank" %>
  <% end %>
</span>